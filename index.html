<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CK-Arena: A Game-based Benchmark for Assessing Conceptual Knowledge in LLMs">
  <meta name="keywords" content="LLM, Game-based benchmark, Conceptual Knowledge">
  <title>Is Your LLM Really Mastering the Concept? A Multi-Agent Benchmark</title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="stylesheet" href="./static/css/game.css">

  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
  
  <style>
    html {
      scroll-behavior: smooth;
    }

    body {
      padding-top: 3.25rem;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .animate-fade-in {
        animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.5); }
        70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
        100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
    }
    .animate-pulse {
        animation: pulse 2s infinite;
    }

    /* Add margin to game demo section */
    #game-demo {
        margin-top: 2rem;
        margin-bottom: 3rem;
    }
  </style>
</head>
<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu">
    <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
      <a class="navbar-item" href="#home">Home</a>
      <a class="navbar-item" href="#abstract">Abstract</a>
      <a class="navbar-item" href="#game-demo">Game Demo</a>
      <a class="navbar-item" href="./sup/knowledge_graph_selector.html" target="_blank">Knowledge Graph</a>
      <a class="navbar-item" href="#results">Results</a>
      <a class="navbar-item" href="#citation">Citation</a>
    </div>
  </div>
</nav>

<section class="hero" id="home">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">Is Your LLM Really Mastering the Concept? A Multi-Agent Benchmark</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="#">Shuhang Xu</a><sup>‚ô¢</sup>,</span>
            <span class="author-block">
              <a href="#">Weijian Deng</a><sup>‚ô£</sup>,</span>
            <span class="author-block">
              <a href="#">Yixuan Zhou</a><sup>‚ô†</sup>,
            </span>
            <span class="author-block">
              <a href="#">Fangwei Zhong</a><sup>‚úâÔ∏è‚ô¢</sup>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>‚ô¢</sup>Beijing Normal University,</span>
            <span class="author-block"><sup>‚ô£</sup>Australian National University,</span>
            <span class="author-block"><sup>‚ô†</sup>Beijing 101 Education Group</span>
          </div>
          
          <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>‚úâÔ∏è</sup>Correspondence to fangweizhong@bnu.edu.cn</span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/pdf/2505.17512"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/Yeswolo/CK-Arena"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <span class="link-block">
                <a href="https://huggingface.co/datasets/Xushuhaha/CK-Arena"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-hugging-face"></i>
                  </span>
                  <span>HuggingFace</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://www.kaggle.com/datasets/shuhangxu68/ck-arena"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-kaggle"></i>
                  </span>
                  <span>Kaggle</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" id="abstract">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">

        <img src="docs/figures/overview.png" alt="Heat Image" class="image my-5 is-flex mx-auto" style="max-width: 100%;" />
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Concepts serve as fundamental abstractions that support human reasoning and categorization. However, it remains unclear whether large language models truly capture such conceptual structures or primarily rely on surface-level pattern memorization. Existing benchmarks are largely static and fact oriented, which limits their ability to probe fine-grained semantic understanding and makes them vulnerable to data leakage and overfitting. 
            To address this limitation, we introduce CK-Arena, a dynamic benchmark for conceptual knowledge evaluation based on a multi agent social deduction game, namely the Undercover game. In this setting, LLM based agents are assigned subtly different concept words and must describe, distinguish, and infer conceptual properties from others‚Äô statements. Model performance is evaluated through both game level outcomes and the semantic quality of generated descriptions.
            Furthermore, CK-Arena leverages the interaction process to automatically construct high quality question answering data for fine grained diagnostic analysis. Experimental results show that conceptual understanding varies substantially across models and categories, and is not strictly aligned with overall model capability.
          </p>
        </div>
      </div>
    </div>
    <!--/ Abstract. -->
  </div>
</section>




<!-- Game Demo Section -->
<section class="section" id="game-demo">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">CK-Arena Demo: Undercover Game</h2>
        <div class="content">
          <p class="has-text-justified">
            Below is an interactive demonstration of the Undercover game used in CK-Arena. We first introduce the basic game rules to help you understand, and then demonstrate the interaction of intelligent agents in the first round of a real experiment. In this game, LLM agents are assigned either the main concept ("bee") or an undercover concept ("butterfly"). Players take turns making statements about their concept without revealing it directly. The goal for the civilians is to identify and eliminate the undercover agents through voting, while undercover agents try to blend in without being detected. <br> <br> <strong> Game Flow </strong>:<br>
	
1.	<strong>Role Assignment</strong>:
Players are randomly assigned as civilians or undercover agents, each receiving a similar but distinct concept.
	<br>2.	<strong>Concept Description</strong>:
In each round, players take turns describing their concept while trying to hide their identity and infer others‚Äô.
	<br>3.	<strong>LLM Evaluation</strong>:
Statements are scored by LLM judges based on novelty, relevance, and reasonableness.
	<br>4.	<strong>Threshold-Based Elimination</strong>:
If a player‚Äôs score falls below a predefined threshold, they are automatically eliminated.
	<br>5.	<strong>Voting Round</strong>:
After a fixed number of rounds, all surviving players vote to eliminate one player based on the dialogue so far.
	<br>6.	<strong>Win Condition Check</strong>:
The game ends when:<br>
	[All undercover agents are eliminated ‚Üí civilians win]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	[Undercover agents equal civilians ‚Üí undercover wins]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	[Maximum number of rounds is reached]
          </p>
          
          <!-- Game Animation Container -->
          <div id="root" class="mt-6"></div>
        </div>
        
      </div>
    </div>
  </div>
</section>

<section class="section" id="results">
  <div class="container is-max-desktop content">
    <!-- Ê†áÈ¢òÂ±Ö‰∏≠ -->
    <h2 class="title is-3 has-text-centered">Experimental Results</h2>

    <!-- ÊèíÂÖ•ËØ¥ÊòéÊñáÂ≠ó -->
    <p class="has-text-justified mt-5" style="max-width: 85%; margin: 0 auto; margin-bottom: 3rem;">
      We have presented some experimental results here. For more comprehensive and specific information about the experiments, please refer to the article.
    </p>

    <!-- ÂõæÁâáÂ±ïÁ§∫Âå∫ -->
    <div class="columns is-multiline" style="max-width: 90%; margin: 0 auto;">
      <!-- Model Leaderboard - Single row -->
      <div class="column is-full" style="margin-bottom: 3rem;">
        <div class="has-text-centered">
          <figure class="image" style="max-width: 85%; margin: 0 auto;">
            <img src="docs/figures/model_leaderboard.png" alt="Model Leaderboard" style="width: 100%; height: auto;" />
          </figure>
        </div>
        <div class="content has-text-left" style="max-width: 85%; margin: 2rem auto 0;">
          <p><em>Leaderboard of LLMs in CK-Arena. Each player starts with an initial rating of 0. After stabilization, a player consistently defeating 0-rated opponents converges around 420, which serves as a reference for strong performance. The leaderboard highlights relative differences across 18 evaluated LLMs.</em></p>
        </div>
      </div>

      <!-- Heatmap and Static Leaderboard - Two column layout -->
      <div class="column is-full" style="margin-bottom: 3rem;">
        <div class="columns is-variable is-4">
          <div class="column is-half">
            <div class="has-text-centered">
              <figure class="image">
                <img src="docs/figures/heat.png" alt="Relevance Heatmap" style="width: 100%; height: auto;" />
              </figure>
            </div>
            <div class="content has-text-left" style="margin: 2rem auto 0;">
              <p><em>Relevance scores of different LLMs across various categories. In this heatmap, the darker the color, the higher the score, intuitively reflecting the association between the descriptions and concepts of each LLM in different categories.</em></p>
            </div>
          </div>
          <div class="column is-half">
            <div class="has-text-centered">
              <figure class="image">
                <img src="docs/figures/static_leaderboard.png" alt="Static Leaderboard" style="width: 100%; height: auto;" />
              </figure>
            </div>
            <div class="content has-text-left" style="margin: 2rem auto 0;">
              <p><em>QA benchmark results. Three open-source models were selected for this evaluation, and the results reflected the specific performance of different models on a single task. The consistency between QA benchmark ranking and dynamic game ranking can also indirectly demonstrate the reliability of dynamic evaluation.</em></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Win rate performance -->
      <div class="column is-full" style="margin-bottom: 3rem;">
        <div class="has-text-centered">
          <figure class="image" style="max-width: 95%; margin: 0 auto;">
            <img src="docs/figures/z.png" alt="Win Rate Performance" style="width: 100%; height: auto;" />
          </figure>
        </div>
        <div class="content has-text-left" style="max-width: 95%; margin: 2rem auto 0;">
          <p><em>The win rate performance of six LLMs across 11 categories. A comparative analysis reveals that each model exhibits distinct strengths and weaknesses across different concept categories. These variations are likely influenced by differences in training data, architectural design, and optimization strategies specific to each model. The analysis reveals models' focus areas, knowledge gaps, and insights for improving conceptual reasoning.</em></p>
        </div>
      </div>

      <!-- t-SNE visualization -->
      <div class="column is-full" style="margin-bottom: 3rem;">
        <div class="has-text-centered">
          <figure class="image" style="max-width: 85%; margin: 0 auto;">
            <img src="docs/figures/t-sne.png" alt="t-SNE Visualization" style="width: 100%; height: auto;" />
          </figure>
        </div>
        <div class="content has-text-left" style="max-width: 85%; margin: 2rem auto 0;">
          <p><em>t-SNE visualizations of LLM statements across concept categories. Each plot shows model outputs for (a) Animals, (b) Food, and (c) Electronics. Repetitive descriptions, reflecting shallow understanding, appear as tightly clustered points, whereas richer knowledge produces more dispersed distributions. The visualizations also indicate that different LLMs center their descriptions on different focal aspects of a concept, suggesting variation in how conceptual knowledge is represented.</em></p>
        </div>
      </div>

      <!-- Interactive Knowledge Graphs -->
      <div class="column is-full" style="margin-bottom: 3rem;">
        <div class="box" style="max-width: 90%; margin: 0 auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; padding: 3rem;">
          <h3 class="title is-3 has-text-centered" style="color: white; margin-bottom: 1rem;">
            <i class="fas fa-project-diagram"></i> Interactive Knowledge Graphs
          </h3>
          <p class="has-text-centered" style="color: rgba(255,255,255,0.95); margin-bottom: 2.5rem; font-size: 1.1rem;">
            Explore concept relationships extracted from LLM-generated descriptions. Select a category to view its interactive knowledge graph.
          </p>

          <!-- Category Grid -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; max-width: 1000px; margin: 0 auto;">

            <a href="./docs/html/animals_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üêæ</span>
              <span>Animals</span>
            </a>

            <a href="./docs/html/food_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üçî</span>
              <span>Food</span>
            </a>

            <a href="./docs/html/tools_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üîß</span>
              <span>Tools</span>
            </a>

            <a href="./docs/html/electronic_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üíª</span>
              <span>Electronics</span>
            </a>

            <a href="./docs/html/plants_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üåø</span>
              <span>Plants</span>
            </a>

            <a href="./docs/html/sports_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">‚öΩ</span>
              <span>Sports</span>
            </a>

            <a href="./docs/html/artifacts_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üè∫</span>
              <span>Artifacts</span>
            </a>

            <a href="./docs/html/landforms_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">‚õ∞Ô∏è</span>
              <span>Landforms</span>
            </a>

            <a href="./docs/html/PeopleSocial_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üë•</span>
              <span>People & Social</span>
            </a>

            <a href="./docs/html/stationary_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">‚úèÔ∏è</span>
              <span>Stationery</span>
            </a>

            <a href="./docs/html/clothing_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üëï</span>
              <span>Clothing</span>
            </a>

            <a href="./docs/html/miscellaneous_KG.html" target="_blank" class="button is-light is-medium" style="height: auto; padding: 1.5rem; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s;">
              <span class="icon is-large" style="font-size: 2rem; margin-bottom: 0.5rem;">üì¶</span>
              <span>Miscellaneous</span>
            </a>

          </div>
        </div>
      </div>

      <style>
        .button.is-light:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.15);
          background: white !important;
        }
      </style>

    </div>
  </div>
</section>


<section class="section" id="citation">
  <div class="container is-max-desktop content">
    <h2 class="title is-3 has-text-centered">BibTeX</h2>

    <p class="has-text-justified mt-5" style="max-width: 80%; margin: 0 auto;">
      If you need to cite our work:
    </p>

    <!-- BibTeX citation -->
    <pre class="mt-6 p-4 bg-gray-100 rounded-lg text-sm" style="max-width: 80%; margin: 0 auto; overflow-x: auto;">
<code>@article{xu2025CKarena,
  title={Is Your LLM Really Mastering the Concept? A Multi-Agent Benchmark},
  author={Shuhang Xu and Weijian Deng and Yixuan Zhou and Fangwei Zhong},
  journal={arXiv preprint arXiv:2505.17512},
  year={2026}
}</code>
    </pre>
  </div>
</section>


<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <a class="icon-link" href="https://CK-Arena.site">
        <i class="fas fa-file-pdf"></i>
      </a>
      <a class="icon-link" href="https://github.com/Yeswolo/CK-Arena" class="external-link">
        <i class="fab fa-github"></i>
      </a>
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This website is licensed under a <a rel="license"
                                                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Game Animation Script -->
<script type="text/babel">
    // React component
    const UndercoverGameAnimation = () => {
        const [gameData, setGameData] = React.useState(null);
        const [loading, setLoading] = React.useState(true);
        const [currentPhase, setCurrentPhase] = React.useState('introduction'); // introduction, statements, evaluation, voting, results
        const [currentStatement, setCurrentStatement] = React.useState(0);
        const [animationProgress, setAnimationProgress] = React.useState(0);
        const [showJudgeScores, setShowJudgeScores] = React.useState(false);
        const [currentGroup, setCurrentGroup] = React.useState(0);
        const [started, setStarted] = React.useState(false);

        React.useEffect(() => {
            // JSON data
            const data = {
                "game_record": {
                    "game_id": "20250506-031447",
                    "timestamp": "2025-05-06T03:14:47.944619",
                    "topic_category": "animals",
                    "concept_pair": {
                        "concept_a": "bee",
                        "concept_b": "butterfly"
                    },
                    "judges": [
                        {
                            "id": "Claude-3-7-sonnet-20250219",
                            "version": ""
                        },
                        {
                            "id": "GPT-4-0125-preview",
                            "version": ""
                        }
                    ],
                    "players": [
                        {
                            "player_id": 1,
                            "llm_id": "Claude-3-5-haiku-20241022",
                            "role": "civilian",
                            "assigned_concept": "bee",
                            "eliminated_in_voting_round": null,
                            "is_winner": true
                        },
                        {
                            "player_id": 2,
                            "llm_id": "GPT-4o",
                            "role": "undercover",
                            "assigned_concept": "butterfly",
                            "eliminated_in_voting_round": 1,
                            "is_winner": false
                        },
                        {
                            "player_id": 3,
                            "llm_id": "qwen2.5-72b",
                            "role": "civilian",
                            "assigned_concept": "bee",
                            "eliminated_in_voting_round": null,
                            "is_winner": true
                        },
                        {
                            "player_id": 4,
                            "llm_id": "LLaMA-3.3-70b-instruct",
                            "role": "undercover",
                            "assigned_concept": "butterfly",
                            "eliminated_in_voting_round": 2,
                            "is_winner": false
                        },
                        {
                            "player_id": 5,
                            "llm_id": "Gemini-2.0-pro-exp",
                            "role": "civilian",
                            "assigned_concept": "bee",
                            "eliminated_in_voting_round": null,
                            "is_winner": true
                        },
                        {
                            "player_id": 6,
                            "llm_id": "DeepSeek-v3",
                            "role": "civilian",
                            "assigned_concept": "bee",
                            "eliminated_in_voting_round": null,
                            "is_winner": true
                        }
                    ],
                    "game_process": {
                        "statements": [
                            {
                                "statement_id": 1,
                                "player_id": 6,
                                "llm_id": "DeepSeek-v3",
                                "content": "A small flying insect that plays a crucial role in pollination.",
                                "statement_round": 1,
                                "metrics": {
                                    "judges_evaluations": [
                                        {
                                            "judge_id": "Claude-3-7-sonnet-20250219",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.6,
                                                "reasonableness_score": 1.0
                                            }
                                        },
                                        {
                                            "judge_id": "GPT-4-0125-preview",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        }
                                    ],
                                    "judges_stats": {
                                        "novelty_score_mean": 1.0,
                                        "relevance_score_mean": 0.7,
                                        "reasonableness_score_mean": 1.0
                                    }
                                }
                            },
                            {
                                "statement_id": 5,
                                "player_id": 2,
                                "llm_id": "GPT-4o",
                                "content": "An insect that undergoes a transformation during its life cycle.",
                                "statement_round": 1,
                                "metrics": {
                                    "judges_evaluations": [
                                        {
                                            "judge_id": "Claude-3-7-sonnet-20250219",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        },
                                        {
                                            "judge_id": "GPT-4-0125-preview",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        }
                                    ],
                                    "judges_stats": {
                                        "novelty_score_mean": 1.0,
                                        "relevance_score_mean": 0.8,
                                        "reasonableness_score_mean": 1.0
                                    }
                                }
                            },
                            {
                                "statement_id": 2,
                                "player_id": 5,
                                "llm_id": "Gemini-2.0-pro-exp",
                                "content": "It is known for producing a sweet, golden liquid.",
                                "statement_round": 1,
                                "metrics": {
                                    "judges_evaluations": [
                                        {
                                            "judge_id": "Claude-3-7-sonnet-20250219",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        },
                                        {
                                            "judge_id": "GPT-4-0125-preview",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 1.0,
                                                "reasonableness_score": 1.0
                                            }
                                        }
                                    ],
                                    "judges_stats": {
                                        "novelty_score_mean": 1.0,
                                        "relevance_score_mean": 0.9,
                                        "reasonableness_score_mean": 1.0
                                    }
                                }
                            },
                            {
                                "statement_id": 3,
                                "player_id": 1,
                                "llm_id": "Claude-3-5-haiku-20241022",
                                "content": "An organism that lives in complex social structures with a hierarchical organization",
                                "statement_round": 1,
                                "metrics": {
                                    "judges_evaluations": [
                                        {
                                            "judge_id": "Claude-3-7-sonnet-20250219",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        },
                                        {
                                            "judge_id": "GPT-4-0125-preview",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 1.0,
                                                "reasonableness_score": 1.0
                                            }
                                        }
                                    ],
                                    "judges_stats": {
                                        "novelty_score_mean": 1.0,
                                        "relevance_score_mean": 0.9,
                                        "reasonableness_score_mean": 1.0
                                    }
                                }
                            },
                            {
                                "statement_id": 4,
                                "player_id": 3,
                                "llm_id": "qwen2.5-72b",
                                "content": "A creature that is often associated with hard work and diligence.",
                                "statement_round": 1,
                                "metrics": {
                                    "judges_evaluations": [
                                        {
                                            "judge_id": "Claude-3-7-sonnet-20250219",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        },
                                        {
                                            "judge_id": "GPT-4-0125-preview",
                                            "metrics": {
                                                "novelty_score": 0.6,
                                                "relevance_score": 0.6,
                                                "reasonableness_score": 0.8
                                            }
                                        }
                                    ],
                                    "judges_stats": {
                                        "novelty_score_mean": 0.8,
                                        "relevance_score_mean": 0.7,
                                        "reasonableness_score_mean": 0.9
                                    }
                                }
                            },
                            {
                                "statement_id": 6,
                                "player_id": 4,
                                "llm_id": "LLaMA-3.3-70b-instruct",
                                "content": "It has a distinct way of moving through the air, characterized by a unique pattern of movement.",
                                "statement_round": 1,
                                "metrics": {
                                    "judges_evaluations": [
                                        {
                                            "judge_id": "Claude-3-7-sonnet-20250219",
                                            "metrics": {
                                                "novelty_score": 1.0,
                                                "relevance_score": 0.8,
                                                "reasonableness_score": 1.0
                                            }
                                        },
                                        {
                                            "judge_id": "GPT-4-0125-preview",
                                            "metrics": {
                                                "novelty_score": 0.8,
                                                "relevance_score": 0.6,
                                                "reasonableness_score": 0.8
                                            }
                                        }
                                    ],
                                    "judges_stats": {
                                        "novelty_score_mean": 0.9,
                                        "relevance_score_mean": 0.7,
                                        "reasonableness_score_mean": 0.9
                                    }
                                }
                            }
                        ],
                        "voting_rounds": [
                            {
                                "voting_round_id": 1,
                                "after_statement_round": 1,
                                "after_statement_id": 6,
                                "votes": [
                                    {
                                        "voter_id": 1,
                                        "voted_for": 2
                                    },
                                    {
                                        "voter_id": 2,
                                        "voted_for": 3
                                    },
                                    {
                                        "voter_id": 3,
                                        "voted_for": 1
                                    },
                                    {
                                        "voter_id": 4,
                                        "voted_for": 2
                                    },
                                    {
                                        "voter_id": 5,
                                        "voted_for": 2
                                    },
                                    {
                                        "voter_id": 6,
                                        "voted_for": 4
                                    }
                                ],
                                "vote_results": {
                                    "1": 2,
                                    "2": 4,
                                    "3": 2,
                                    "4": 2,
                                    "5": 1,
                                    "6": 1
                                },
                                "eliminated": [
                                    {
                                        "player_id": 2,
                                        "llm_id": "GPT-4o",
                                        "role": "undercover",
                                        "correct_elimination": true
                                    }
                                ]
                            }
                        ]
                    }
                }
            };

            setGameData(data);
            setLoading(false);

            // Auto-play animation
                const timer = setTimeout(() => {
                    if (started && currentPhase === 'introduction') {
                        setCurrentPhase('statements');
                    }
                }, 5000);

                return () => clearTimeout(timer);
            }, [currentPhase]);

        // React.useEffect(() => {
        //     if (currentPhase === 'introduction') {
        //         setCurrentPhase('statements');
        //     }
        // }, [currentPhase]);

        React.useEffect(() => {
            if (currentPhase === 'statements') {
                const statementTimer = setTimeout(() => {
                    if (currentStatement < 6) {
                        setCurrentStatement(currentStatement + 1);
                    } else {
                        // Skip evaluation and go directly to voting
                        setCurrentPhase('voting');
                    }
                }, 3000);

                return () => clearTimeout(statementTimer);
            }

            if (currentPhase === 'voting') {
                const votingInterval = setInterval(() => {
                    setAnimationProgress(prev => {
                        if (prev >= 100) {
                            clearInterval(votingInterval);
                            const delayTimer = setTimeout(() => {
                                setCurrentPhase('results');
                            }, 5000);
                            return 100;
                        }
                        return prev + 10;
                    });
                }, 300);

                return () => clearInterval(votingInterval);
            }
        }, [currentPhase, currentStatement]);

            if (loading) {
                return <div className="flex items-center justify-center h-screen">Loading game data...</div>;
            }

            const getModelName = (llmId) => {
                // Simplify model name display
                const parts = llmId.split('-');
                return parts[0].charAt(0).toUpperCase() + parts[0].slice(1);
            };

            const getPlayerColor = (playerId) => {
                const player = gameData.game_record.players.find(p => p.player_id === playerId);
                if (player.role === 'undercover') {
                    return 'from-red-500 to-red-700'; // Undercover is red
                }
                return 'from-green-500 to-green-700'; // Civilian is green
            };

            const firstRoundStatements = gameData.game_record.game_process.statements.filter(s => s.statement_round === 1);
            const firstRoundVoting = gameData.game_record.game_process.voting_rounds[0];

            const renderIntroduction = () => (
                <div className="text-center animate-fade-in">
                    <h2 className="text-2xl font-bold mb-4">Undercover Game</h2>
                    <p className="text-lg mb-2">Topic Category: Animals</p>
                    <div className="flex justify-center space-x-8 mt-6">
                    <div className="text-center">
                        <div className="bg-gradient-to-r from-green-500 to-green-700 text-white p-4 rounded-lg">
                        Civilian Concept: <span className="font-bold">bee</span>
                        </div>
                    </div>
                    <div className="text-center">
                        <div className="bg-gradient-to-r from-red-500 to-red-700 text-white p-4 rounded-lg">
                        Undercover Concept: <span className="font-bold">butterfly</span>
                        </div>
                    </div>
                    </div>

                    {/* Start Button Below Introduction */}
                    {!started && (
                    <div className="mt-6">
                        <button
                        className="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"
                        onClick={() => {
                            setStarted(true);
                            setCurrentPhase('statements');
                        }}
                        >
                        Start Demo
                        </button>
                    </div>
                    )}
                </div>
            );

            const renderStatements = () => {
                const currentStatementData = currentStatement > 0 ? firstRoundStatements[currentStatement - 1] : null;
                const currentPlayer = currentStatementData ? gameData.game_record.players.find(p => p.player_id === currentStatementData.player_id) : null;
                const currentScores = currentStatementData ? currentStatementData.metrics.judges_stats : null;

                return (
                    <div className="animate-fade-in">
                        <h2 className="text-2xl font-bold mb-6 text-center">Round 1 Statements</h2>
                        
                        {/* Player Icons Row */}
                        <div className="flex justify-center space-x-4 mb-8">
                            {firstRoundStatements.map((statement, index) => {
                                const player = gameData.game_record.players.find(p => p.player_id === statement.player_id);
                                const isActive = index === currentStatement - 1;
                                const hasSpoken = index < currentStatement;
                                
                                return (
                                    <div key={statement.statement_id} className="text-center">
                                        <div className={`w-16 h-16 rounded-full bg-gradient-to-r ${getPlayerColor(player.player_id)} text-white flex items-center justify-center font-bold text-lg transition-all duration-500 ${
                                            isActive ? 'animate-pulse ring-4 ring-blue-400 scale-110' : 
                                            hasSpoken ? 'opacity-60' : 'opacity-30'
                                        }`}>
                                            {player.player_id}
                                        </div>
                                        <div className={`mt-2 text-sm font-medium transition-all duration-300 ${
                                            isActive ? 'text-blue-600 font-bold' : 
                                            hasSpoken ? 'text-gray-700' : 'text-gray-400'
                                        }`}>
                                            {getModelName(player.llm_id)}
                                        </div>
                                        {isActive && (
                                            <div className="mt-1 text-xs text-blue-500 font-semibold animate-bounce">
                                                Speaking...
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>

                        {/* Current Statement Display */}
                        {currentStatementData && (
                            <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border-2 border-blue-200 animate-fade-in shadow-lg">
                                <div className="flex items-center mb-4">
                                    <div className={`w-12 h-12 rounded-full bg-gradient-to-r ${getPlayerColor(currentPlayer.player_id)} text-white flex items-center justify-center font-bold text-lg mr-4 ring-2 ring-white shadow-lg`}>
                                        {currentPlayer.player_id}
                                    </div>
                                    <div>
                                        <div className="font-bold text-lg text-gray-800">{getModelName(currentPlayer.llm_id)}</div>
                                        <div className="text-sm text-gray-600">
                                            {currentPlayer.role === 'undercover' ? 'Undercover Agent' : 'Civilian'} ‚Ä¢ 
                                            Concept: {currentPlayer.assigned_concept}
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="bg-white p-4 rounded-lg mb-4 shadow-inner">
                                    <p className="text-lg italic text-gray-700 leading-relaxed">"{currentStatementData.content}"</p>
                                </div>

                                {/* Judge Scores */}
                                <div className="grid grid-cols-3 gap-4 bg-white p-4 rounded-lg shadow-inner">
                                    <div className="text-center">
                                        <div className="text-sm text-gray-600 mb-1">Novelty</div>
                                        <div className="font-bold text-2xl text-purple-600">{currentScores.novelty_score_mean.toFixed(1)}</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-sm text-gray-600 mb-1">Relevance</div>
                                        <div className="font-bold text-2xl text-green-600">{currentScores.relevance_score_mean.toFixed(1)}</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-sm text-gray-600 mb-1">Reasonableness</div>
                                        <div className="font-bold text-2xl text-blue-600">{currentScores.reasonableness_score_mean.toFixed(1)}</div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Progress Indicator */}
                        <div className="mt-6 text-center">
                            <div className="text-sm text-gray-500 mb-2">Statement Progress</div>
                            <div className="w-full bg-gray-200 rounded-full h-2 max-w-md mx-auto">
                                <div 
                                    className="bg-blue-600 h-2 rounded-full transition-all duration-500" 
                                    style={{width: `${(currentStatement / 6) * 100}%`}}
                                ></div>
                            </div>
                            <div className="text-xs text-gray-500 mt-1">{currentStatement} of 6 statements</div>
                        </div>
                    </div>
                );
            };

            const renderVoting = () => (
                <div className="animate-fade-in">
                    <h2 className="text-2xl font-bold mb-4 text-center">Voting Summary</h2>
                    <div className="grid grid-cols-6 gap-2 mb-6">
                        {Object.entries(firstRoundVoting.vote_results).map(([playerId, votes]) => {
                            const player = gameData.game_record.players.find(p => p.player_id === parseInt(playerId));
                            return (
                                <div key={playerId} className="text-center">
                                    <div className={`w-12 h-12 mx-auto rounded-full bg-gradient-to-r ${getPlayerColor(parseInt(playerId))} text-white flex items-center justify-center font-bold`}>
                                        {playerId}
                                    </div>
                                    <div className="mt-2">Votes</div>
                                    <div className="w-8 h-8 mx-auto rounded-full bg-gray-700 text-white flex items-center justify-center font-bold">
                                        {votes}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );

            const renderResults = () => (
                <div className="animate-fade-in">
                    <h2 className="text-2xl font-bold mb-4 text-center">Voting Results</h2>
                    <div className="mb-8">
                        <div className="grid grid-cols-6 gap-2 mb-6">
                            {Object.entries(firstRoundVoting.vote_results).map(([playerId, votes]) => (
                                <div key={playerId} className="text-center">
                                    <div className={`w-12 h-12 mx-auto rounded-full bg-gradient-to-r ${getPlayerColor(parseInt(playerId))} text-white flex items-center justify-center font-bold`}>
                                        {playerId}
                                    </div>
                                    <div className="mt-2">Received</div>
                                    <div className="w-8 h-8 mx-auto rounded-full bg-gray-700 text-white flex items-center justify-center font-bold">
                                        {votes}
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        <div className="text-center p-4 bg-red-100 rounded-lg">
                            <h3 className="font-bold text-xl mb-2">Eliminated Player</h3>
                            {firstRoundVoting.eliminated.map(eliminated => {
                                const player = gameData.game_record.players.find(p => p.player_id === eliminated.player_id);
                                return (
                                    <div key={eliminated.player_id} className="mb-2">
                                        <div className="flex items-center justify-center">
                                            <div className={`w-12 h-12 rounded-full bg-gradient-to-r from-red-500 to-red-700 text-white flex items-center justify-center font-bold mr-3`}>
                                                {eliminated.player_id}
                                            </div>
                                            <div>
                                                <div className="font-medium">{getModelName(eliminated.llm_id)}</div>
                                                <div className="text-red-700 font-bold">Role: Undercover ({player.assigned_concept})</div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                            <div className="mt-4 text-green-700 font-bold text-xl">
                                Successfully eliminated an undercover!
                            </div>
                        </div>
                    </div>
                    
                    <div className="text-center">
                        <button 
                            className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                            onClick={() => {
                                setCurrentPhase('introduction');
                                setCurrentStatement(0);
                                setAnimationProgress(0);
                                setShowJudgeScores(false);
                            }}
                        >
                            Replay
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="bg-white p-6 max-w-4xl mx-auto rounded-xl shadow-lg">
                    <header className="mb-6">
                        <h1 className="text-3xl font-bold text-center text-gray-800">Undercover Game Animation</h1>
                        <div className="flex justify-center space-x-4 mt-2">
                            <div className={`px-3 py-1 rounded-full text-sm ${currentPhase === 'introduction' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}>
                                Introduction
                            </div>
                            <div className={`px-3 py-1 rounded-full text-sm ${currentPhase === 'statements' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}>
                                Statements
                            </div>
                            <div className={`px-3 py-1 rounded-full text-sm ${currentPhase === 'voting' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}>
                                Voting
                            </div>
                            <div className={`px-3 py-1 rounded-full text-sm ${currentPhase === 'results' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}>
                                Results
                            </div>
                        </div>
                    </header>


                    <main className="min-h-96">
                        {currentPhase === 'introduction' && renderIntroduction()}
                        {currentPhase === 'statements' && started && renderStatements()}
                        {currentPhase === 'voting' && started && renderVoting()}
                        {currentPhase === 'results' && started && renderResults()}
                    </main>

                    <footer className="mt-8 text-center text-sm text-gray-500">
                        Game ID: {gameData.game_record.game_id}
                    </footer>
                </div>
            );
        };

        // Render the React component
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<UndercoverGameAnimation />);
    </script>

<!-- Import game engine and API adapters -->
<script src="./static/js/game/Prompts.js"></script>
<script src="./static/js/game/ConceptLoader.js"></script>
<script src="./static/js/api/LLMProvider.js"></script>
<script src="./static/js/api/OpenAIAdapter.js"></script>
<script src="./static/js/api/AnthropicAdapter.js"></script>
<script src="./static/js/api/GoogleAdapter.js"></script>
<script src="./static/js/game/Judge.js"></script>
<script src="./static/js/game/Player.js"></script>
<script src="./static/js/game/GameEngine.js"></script>

</body>
</html>